export const stationInfo = {
    'ASBA': {'lat': 48.167778,  'lon': 17.105833,  'elev': 287.0,  'name': 'Bratislava - Koliba'},
    'ASIB': {'lat': 48.170278,  'lon': 17.2075,  'elev': 133.0,  'name': 'Bratislava - Letisko'},
    'ASJB': {'lat': 48.486111,  'lon': 17.663889,  'elev': 174.0,  'name': 'Jaslovské Bohunice'},
    'ASPP': {'lat': 48.613056,  'lon': 17.831667,  'elev': 163.0,  'name': 'Piešťany'},
    'ASZI': {'lat': 49.2325,  'lon': 18.614167,  'elev': 309.0,  'name': 'Žilina - Dolný Hričov'},
    'ASNI': {'lat': 48.280278,  'lon': 18.133889,  'elev': 135.0,  'name': 'Nitra - Veľké Janíkovce'},
    'ASMO': {'lat': 48.288889, 'lon': 18.455, 'elev': 260.0, 'name': 'Mochovce'},
    'ASHU': {'lat': 47.8725,  'lon': 18.193056,  'elev': 112.0,  'name': 'Hurbanovo'},
    'ASPE': {'lat': 48.767594,  'lon': 18.592987,  'elev': 260.0,  'name': 'Prievidza'},
    'ASDU': {'lat': 48.169722,  'lon': 18.876944,  'elev': 139.0,  'name': 'Dudince'},
    'ASSL': {'lat': 48.64167, 'lon': 19.14028, 'elev': 313.0, 'name': 'Sliač'},
    'LZSL': {'lat': 48.639006, 'lon': 19.139493, 'elev': 313.0, 'name': 'Sliač'},
    'ASCH': {'lat': 48.943333,  'lon': 19.588889,  'elev': 1995.0,  'name': 'Chopok'},
    'ASLK': {'lat': 49.369523, 'lon': 19.678204, 'elev': 692.0, 'name': 'Liesek'},
    'ASLU': {'lat': 48.339365,  'lon': 19.733876,  'elev': 214.0,  'name': 'Lučenec - Boľkovce'},
    'ASLS': {'lat': 49.195278,  'lon': 20.213056,  'elev': 2634.0,  'name': 'Lomnický Štít'},
    'ASSP': {'lat': 49.117785,  'lon': 20.062418,  'elev': 1319.0,  'name': 'Štrbské Pleso'},
    'ASTT': {'lat': 49.068056, 'lon': 20.249444, 'elev': 694.0, 'name': 'Poprad'},
    'ASTG': {'lat': 48.848362,  'lon': 20.187658,  'elev': 906.0,  'name': 'Telgárt'},
    'ASMB': {'lat': 48.615076,  'lon': 21.005117,  'elev': 215.0,  'name': 'Moldava nad Bodvou'},
    'LZPW': {'lat': 49.03,  'lon': 21.304444,  'elev': 308.0,  'name': 'Prešov - Vojsko'},
    'ASKH': {'lat': 48.782907,  'lon': 20.987029,  'elev': 1247.0,  'name': 'Kojšovská Hoľa'},
    'ASKZ': {'lat': 48.670761,  'lon': 21.238661,  'elev': 230.0,  'name': 'Košice - Letisko'},
    'ASSK': {'lat': 49.214722,  'lon': 21.646389,  'elev': 216.0,  'name': 'Tisinec'},
    'ASMI': {'lat': 48.663056,  'lon': 21.721944,  'elev': 103.0,  'name': 'Milhostov'},
    'ASKC': {'lat': 48.934722,  'lon': 21.994444,  'elev': 175.0,  'name': 'Kamenica nad Cirochou'},
    'ASTN': {'lat': 48.866389,  'lon': 17.999444,  'elev': 204.0,  'name': 'Trenčín'},
    'ASSE': {'lat': 48.68915, 'lon': 17.403094, 'elev': 231.0, 'name': 'Senica'},
    'ASMY': {'lat': 48.753333, 'lon': 17.560278, 'elev': 345.0, 'name': 'Myjava'},
    'ASMJ': {'lat': 48.255743,  'lon': 17.152589,  'elev': 581.0,  'name': 'Malý Javorník'},
    'ASTU': {'lat': 49.401564,  'lon': 18.626783,  'elev': 496.0,  'name': 'Turzovka'},
    'ASLM': {'lat': 49.09739,  'lon': 19.590288,  'elev': 569.0,  'name': 'Liptovský Mikuláš - Ondrašová'},
    'ASVL': {'lat': 48.056087,  'lon': 18.335425,  'elev': 186.0,  'name': 'Veľké Lovce'},
    'ASMU': {'lat': 47.800456, 'lon': 18.595672, 'elev': 120.0, 'name': 'Mužla'},
    'ASBB': {'lat': 48.733419,  'lon': 19.115097,  'elev': 429.0,  'name': 'Banská Bystrica - Zelená'},
    'ASZR': {'lat': 48.585719,  'lon': 18.850353,  'elev': 262.0,  'name': 'Žiar nad Hronom'},
    'ASBS': {'lat': 48.449061,  'lon': 18.919689,  'elev': 570.0,  'name': 'Banská Štiavnica'},
    'ASLR': {'lat': 48.643889,  'lon': 19.649167,  'elev': 1017.0,  'name': 'Lom nad Rimavicou'},
    'ASBR': {'lat': 48.800347, 'lon': 19.636517, 'elev': 488.0, 'name': 'Brezno'},
    'ASSW': {'lat': 48.944197,  'lon': 20.80201,  'elev': 381.0,  'name': 'Spišské Vlachy'},
    'ASPO': {'lat': 49.262067,  'lon': 20.542689,  'elev': 567.0,  'name': 'Podolínec'},
    'ASGN': {'lat': 49.034741,  'lon': 20.323284,  'elev': 703.0,  'name': 'Gánovce'},
    'ASBJ': {'lat': 49.285045,  'lon': 21.270903,  'elev': 311.0,  'name': 'Bardejov'},
    'ASJK': {'lat': 49.108359,  'lon': 21.139323,  'elev': 409.0,  'name': 'Jakubovany'},
    'ASGB': {'lat': 47.897736,  'lon': 17.566213,  'elev': 114.0,  'name': 'Gabčíkovo'},
    'ASZY': {'lat': 49.026686,  'lon': 18.922836,  'elev': 427.0,  'name': 'Martin - Zábrokeky'},
    'ASTJ': {'lat': 49.263889,  'lon': 20.139444,  'elev': 1017.0,  'name': 'Tatranská Javorina'},
    'ASST': {'lat': 49.15139,  'lon': 20.289443,  'elev': 808.0,  'name': 'Stará Lesná'},
    'ASKB': {'lat': 49.25306,  'lon': 21.91194,  'elev': 305.0,  'name': 'Krásny Brod'},
    'ASBV': {'lat': 49.301648,  'lon': 21.884013,  'elev': 349.0,  'name': 'Medzilaborce - Borov'},
    'ASZA': {'lat': 49.211439, 'lon': 18.771139, 'elev': 358.0, 'name': 'Žilina'},
    'ASMP': {'lat': 48.372778,  'lon': 17.273889,  'elev': 533.0,  'name': 'Modra - Piesok'},
    'ASOL': {'lat': 49.367867,  'lon': 19.182453,  'elev': 781.0,  'name': 'Oravská Lesná'},
    'ASRK': {'lat': 49.071728,  'lon': 19.34087,  'elev': 507.0,  'name': 'Ružomberok'}
};

export async function loadData(urls) {
    var data = {};
    for (const url of urls) {
        const variableName = url.split('/').pop().replace('_data.csv', '');
        await d3.csv(url).then(function(csvData) {
            data[variableName] = csvData;
        }).then(
            data = await convertValues(data)
        );
    }
    return {data, stationInfo};
}

async function convertValues(data){
    for (const [measuredVariable, measurements] of Object.entries(data)){
        for (let measurement of measurements){
            var {date, ...other} = measurement;
            for (const [k, v] of Object.entries(other)){
                measurement[k] = +v;
            }
        }    
    }
    return data;
}